# ITSæ™ºèƒ½äº¤é€šç³»ç»Ÿ - æµ·å¤–éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆæ€»è§ˆ

æœ¬é¡¹ç›®æä¾›**å…¨å…è´¹**çš„æµ·å¤–éƒ¨ç½²æ–¹æ¡ˆï¼Œæ”¯æŒå›½å†…ç”¨æˆ·è®¿é—®ï¼š

- **å‰ç«¯æ‰˜ç®¡**: Vercelï¼ˆå…¨çƒCDNï¼Œå›½å†…è®¿é—®ä¼˜åŒ–ï¼‰
- **åç«¯æœåŠ¡**: Railwayï¼ˆå…è´¹Pythonåº”ç”¨æ‰˜ç®¡ï¼‰
- **æ•°æ®åº“**: Supabase PostgreSQLï¼ˆå…è´¹25MBï¼‰
- **åŸŸå**: ä½¿ç”¨å­åŸŸåï¼Œæ— éœ€è´­ä¹°åŸŸå

## ğŸ—ï¸ éƒ¨ç½²æ¶æ„

```
[ç”¨æˆ·æµè§ˆå™¨] 
    â†“
[Vercel CDN] (å‰ç«¯é™æ€é¡µé¢)
    â†“ APIè¯·æ±‚
[ Railway API ] (åç«¯æœåŠ¡)
    â†“ æ•°æ®å­˜å‚¨
[ Supabase ] (PostgreSQLæ•°æ®åº“)
```

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡GitHubä»“åº“

1. åˆ›å»ºGitHubä»“åº“ï¼š
```bash
git init
git add .
git commit -m "Initial ITS project"
git remote add origin https://github.com/your-username/its-traffic.git
git push -u origin main
```

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ°Vercel

1. è®¿é—® [vercel.com](https://vercel.com)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. ç‚¹å‡»"New Project"ï¼Œé€‰æ‹©ä½ çš„ITSä»“åº“
4. é…ç½®ï¼š
   - **Framework Preset**: Other
   - **Build Command**: ç•™ç©º
   - **Output Directory**: . (æ ¹ç›®å½•)
   - **Install Command**: ç•™ç©º
5. ç‚¹å‡»"Deploy"
6. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œè·å–URL: `https://your-app.vercel.app`

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åç«¯åˆ°Railway

1. è®¿é—® [railway.app](https://railway.app)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. ç‚¹å‡»"New Project" â†’ "Deploy from GitHub repo"
4. é€‰æ‹©ä½ çš„ITSä»“åº“
5. Railwayä¼šè‡ªåŠ¨æ£€æµ‹Pythoné¡¹ç›®å¹¶éƒ¨ç½²
6. éƒ¨ç½²å®Œæˆåï¼Œè·å–API URL: `https://your-app.up.railway.app`

### ç¬¬å››æ­¥ï¼šé…ç½®Supabaseæ•°æ®åº“

1. è®¿é—® [supabase.com](https://supabase.com)
2. åˆ›å»ºæ–°é¡¹ç›®
3. åœ¨é¡¹ç›®è®¾ç½®ä¸­è·å–ï¼š
   - Project URL
   - Anon/Public Key
4. è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š
```bash
chmod +x setup_database.sh
./setup_database.sh
```

### ç¬¬äº”æ­¥ï¼šæ›´æ–°é…ç½®

1. ä¿®æ”¹ `assets/api-config.js` ä¸­çš„APIåœ°å€ï¼š
```javascript
production: {
  baseURL: 'https://your-app.up.railway.app',
  wsURL: 'wss://your-app.up.railway.app'
}
```

2. è®¾ç½®Railwayç¯å¢ƒå˜é‡ï¼š
   - åœ¨Railwayé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š
   - `AMAP_API_KEY`: ä½ çš„é«˜å¾·API Key
   - `DATABASE_URL`: Supabaseæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
   - `REDIS_URL`: Redisè¿æ¥åœ°å€

### ç¬¬å…­æ­¥ï¼šé‡æ–°éƒ¨ç½²

1. æäº¤é…ç½®æ›´æ”¹åˆ°GitHub
2. Vercelå’ŒRailwayä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²

## ğŸ”§ é…ç½®è¯¦æƒ…

### é«˜å¾·APIé…ç½®

åœ¨[é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/)ç”³è¯·ï¼š
1. **WebæœåŠ¡API Key** (ç”¨äºåç«¯æ•°æ®è·å–)
2. **JS API Key** (ç”¨äºå‰ç«¯åœ°å›¾æ˜¾ç¤º)

### ç¯å¢ƒå˜é‡è®¾ç½®

**Railwayç¯å¢ƒå˜é‡ï¼š**
```
AMAP_API_KEY=ä½ çš„é«˜å¾·WebæœåŠ¡API Key
DATABASE_URL=postgresql://postgres:[å¯†ç ]@[é¡¹ç›®ID].supabase.co:5432/postgres
REDIS_URL=redis://localhost:6379
CORS_ORIGINS=https://your-app.vercel.app
```

### CORSé…ç½®

Railwayåç«¯å·²é…ç½®CORSæ”¯æŒVercelå‰ç«¯è®¿é—®ã€‚

## ğŸŒ å›½å†…è®¿é—®ä¼˜åŒ–

### è®¿é—®é€Ÿåº¦å¯¹æ¯”
- **Vercel**: é€šè¿‡Cloudflare CDNï¼Œå›½å†…è®¿é—®å»¶è¿Ÿ200-500ms
- **Railway**: ç¾å›½æœåŠ¡å™¨ï¼ŒAPIå“åº”æ—¶é—´500-800ms
- **Supabase**: äºšå¤ªèŠ‚ç‚¹ï¼Œæ•°æ®åº“å»¶è¿Ÿ100-300ms

### ä¼˜åŒ–å»ºè®®
1. ä½¿ç”¨Vercelçš„Edge Networkæå‡è®¿é—®é€Ÿåº¦
2. å‰ç«¯å¯ç”¨èµ„æºå‹ç¼©å’Œç¼“å­˜
3. åç«¯é…ç½®å“åº”ç¼“å­˜

## ğŸ“Š æˆæœ¬ä¼°ç®—

### å…è´¹é¢åº¦
- **Vercel**: 100GBå¸¦å®½/æœˆ
- **Railway**: 500å°æ—¶/æœˆæ‰§è¡Œæ—¶é—´
- **Supabase**: 25MBæ•°æ®åº“ï¼Œ1GBå­˜å‚¨
- **é«˜å¾·API**: ä¸ªäººå…è´¹è°ƒç”¨é‡

### é¢„ä¼°æœˆæˆæœ¬
- **æµé‡ < 100GB**: å…¨éƒ¨å…è´¹
- **APIè°ƒç”¨ < é™åˆ¶**: å…¨éƒ¨å…è´¹
- **æ•°æ®åº“ < 25MB**: å…¨éƒ¨å…è´¹

## ğŸš€ åŠŸèƒ½éªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œè¯·æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

### å‰ç«¯æµ‹è¯•
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] åœ°å›¾æ˜¾ç¤ºæ­£å¸¸
- [ ] è·¯çº¿è§„åˆ’åŠŸèƒ½
- [ ] äº¤é€šæ€åŠ¿æŸ¥è¯¢

### åç«¯æµ‹è¯•
- [ ] APIå¥åº·æ£€æŸ¥: `GET /health`
- [ ] äº¤é€šæ•°æ®é‡‡é›†: `POST /api/collect`
- [ ] é¢„æµ‹åŠŸèƒ½: `POST /api/predict`
- [ ] WebSocketè¿æ¥: `WS /ws`

### æ•°æ®åº“æµ‹è¯•
- [ ] æ•°æ®å†™å…¥æ­£å¸¸
- [ ] æ•°æ®æŸ¥è¯¢æ­£å¸¸
- [ ] è¿æ¥æ± æ­£å¸¸

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. é«˜å¾·APIè°ƒç”¨å¤±è´¥**
- æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®
- ç¡®è®¤API Keyç±»å‹ï¼ˆWebæœåŠ¡ vs JS APIï¼‰
- æ£€æŸ¥åŸŸåç™½åå•é…ç½®

**2. å‰ç«¯æ— æ³•è®¿é—®åç«¯**
- æ£€æŸ¥CORSé…ç½®
- ç¡®è®¤åç«¯æœåŠ¡çŠ¶æ€
- éªŒè¯APIåœ°å€é…ç½®

**3. æ•°æ®åº“è¿æ¥å¤±è´¥**
- æ£€æŸ¥Supabaseè¿æ¥å­—ç¬¦ä¸²
- ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®
- éªŒè¯æ•°æ®åº“æƒé™

**4. è®¿é—®é€Ÿåº¦æ…¢**
- ä½¿ç”¨VPNä¼˜åŒ–ç½‘ç»œè¿æ¥
- è€ƒè™‘ä½¿ç”¨Cloudflareä»£ç†
- ä¼˜åŒ–å‰ç«¯èµ„æºåŠ è½½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹éƒ¨ç½²å¹³å°çš„æ—¥å¿—
2. ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·è°ƒè¯•
3. æ£€æŸ¥é«˜å¾·APIæ§åˆ¶å°çš„è°ƒç”¨ç»Ÿè®¡
4. å‚è€ƒæœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### è‡ªåŠ¨æ›´æ–°
- ä»£ç æ¨é€åˆ°GitHubä¸»åˆ†æ”¯
- Vercelå’ŒRailwayä¼šè‡ªåŠ¨éƒ¨ç½²

### æ‰‹åŠ¨æ›´æ–°
1. åœ¨GitHubä¸Šåˆ›å»ºæ–°åˆ†æ”¯
2. æ¨é€ä»£ç åˆ°æ–°åˆ†æ”¯
3. åœ¨éƒ¨ç½²å¹³å°æ‰‹åŠ¨è§¦å‘é‡æ–°éƒ¨ç½²

---

**éƒ¨ç½²å®Œæˆåï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨å…è´¹çš„æµ·å¤–è®¿é—®æ™ºèƒ½äº¤é€šç³»ç»Ÿï¼** ğŸ‰

æ¨èè®¿é—®åœ°å€ï¼š
- å‰ç«¯: `https://its-traffic-app.vercel.app`
- åç«¯API: `https://its-traffic-api.up.railway.app`
